<div class="w-full heighContentRight" id="heighContentRightId">
    <div class="w-full mb-10">
        <fuse-card class="flex flex-col w-full p-4">

            <ng-container *ngIf="!showVue">
                <div class="flex flex-col flex-auto bg-card overflow-hidden">
                    <div class="flex justify-between mb-1.5">
                        <div class="mr-4 text-lg font-medium tracking-tight leading-6 truncate c_label">Compte</div>
                        <div class="flex items-center mt-8 mb-4 lg:m-0 lg:ml-auto floatRight">
                            <button *ngIf="currentClient?.statut === constantes?.STATUS?.VALIDE" class="c_btnAccount_attribut c_btnAccountF" matTooltip="Ajouter compte" (click)="ajoutCompte()" mat-icon-button>
                                <mat-icon class="c_icons c_cursor icon-size-5" [svgIcon]="'heroicons_solid:plus-circle'"></mat-icon>
                            </button>

                        </div>
                    </div>
                    <hr>
                    <div class="overflow-x-auto" *ngIf="compteDataSource.data.length !== 0">
                        <table aria-label="compte 1" class="w-full bg-transparent" mat-table matSort
                            [dataSource]="compteDataSource" [trackBy]="trackByFn" #compteTable>
                            <ng-container matColumnDef="numero">
                                <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                    Numéro compte
                                </th>
                                <td mat-cell *matCellDef="let compte">
                                    <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                        {{compte?.numero}}
                                    </span>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="compteGeneral">
                                <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                    Compte général
                                </th>
                                <td mat-cell *matCellDef="let compte">
                                    <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                        {{compte?.compteGeneral?.numero}}
                                    </span>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="typeCompte">
                                <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                    Type compte
                                </th>
                                <td mat-cell *matCellDef="let compte">
                                    <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                        {{compte?.typeCompte?.libelle}}
                                    </span>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="soldeCompte">
                                <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                    Solde
                                </th>
                                <td mat-cell *matCellDef="let compte">
                                    <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                        {{compte?.soldeIndicatif | number : '1.0-0':'fr'}}
                                    </span>
                                </td>
                            </ng-container>

                            <ng-container matColumnDef="statut">
                                <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                    Statut
                                </th>
                                <td mat-cell *matCellDef="let compte">
                                    <span class="custom_badge_success1"
                                        *ngIf="compte?.statut === constantes.STATUS.OUVERT">{{compte?.statut}}</span>
                                    <span class="custom_badge_red"
                                        *ngIf="compte?.statut === constantes.STATUS.BLOQUE">{{compte?.statut}}</span>
                                    <span class="custom_badge_grey"
                                        *ngIf="compte?.statut === constantes.STATUS.CLOTURE">{{compte?.statut}}</span>
                                    <span class="custom_badge_grey"
                                        *ngIf="compte?.statut === constantes.STATUS.INACTIF">{{compte?.statut}}</span>
                                    <span class="custom_badge_grey"
                                        *ngIf="compte?.statut === constantes.STATUS.DORMANT">{{compte?.statut}}</span>
                                </td>
                            </ng-container>

                            <ng-container matColumnDef="dateCreated">
                                <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                    Date de création
                                </th>
                                <td mat-cell *matCellDef="let compte">
                                    <span class="pr-6 whitespace-nowrap">
                                        {{compte.dateCreated | date: 'dd/MM/yyyy'}}
                                    </span>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="action">
                                <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                    Action
                                </th>
                                <td mat-cell *matCellDef="let compte">
                                    <p class="pr-6 whitespace-nowrap">
                                        <button matTooltip="Détails" mat-icon-button (click)="detailsCompte(compte)">
                                            <mat-icon class="text-blue-500 icon-size-4"
                                                [svgIcon]="'heroicons_outline:eye'">
                                            </mat-icon>
                                        </button>
                                        <button *ngIf="compte?.statut === constantes.STATUS.INACTIF" matTooltip="Lever le compte inactif" mat-icon-button (click)="leverCompte(compte)">
                                            <mat-icon class="text-green-500 icon-size-4"
                                                [svgIcon]="'mat_solid:multiple_stop'">
                                            </mat-icon>
                                        </button>
                                        <button *ngIf="compte?.statut === constantes.STATUS.DORMANT" matTooltip="Lever le compte dormant" mat-icon-button (click)="leverCompte(compte)">
                                            <mat-icon class="text-green-500 icon-size-4"
                                                [svgIcon]="'mat_solid:multiple_stop'">
                                            </mat-icon>
                                        </button>
                                        <button [disabled]="currentClient?.statut ==='DEMISSION'" *ngIf="compte?.statut === constantes.STATUS.OUVERT" mat-icon-button
                                            matTooltip="Bloquer le compte"
                                            (click)="activerDesactiver(compte, 'BLOQUE')">
                                            <mat-icon class="text-red-500 iconAction2 text-stone-900 icon-size-4"
                                                [svgIcon]="'heroicons_outline:lock-closed'">
                                            </mat-icon>
                                        </button>
                                        <button [disabled]="currentClient?.statut ==='DEMISSION'" *ngIf="compte?.statut === constantes.STATUS.BLOQUE" mat-icon-button
                                            matTooltip="Debloquer le compte"
                                            (click)="activerDesactiver(compte, 'OUVERT')">
                                            <mat-icon class="text-green-500 iconAction2 text-stone-900 icon-size-4"
                                                [svgIcon]="'heroicons_outline:lock-open'">
                                            </mat-icon>
                                        </button>
                                    </p>
                                </td>
                            </ng-container>
                            <tr mat-header-row *matHeaderRowDef="compteColumns"></tr>
                            <tr class="order-row h-16" mat-row *matRowDef="let row; columns: compteColumns;"></tr>
                        </table>
                        <div *ngIf="!isLoading && compteDataSource.data.length === 0">
                            <ng-container>
                                <div class="p-8 title_chargement font-semibold tracking-tight text-center textVideMessage">
                                    La liste est vide !!!</div>
                            </ng-container>
                        </div>
                    </div>
                    <div *ngIf="isLoading" class="custom-loader"></div>
                </div>
            </ng-container>


            <div *ngIf="isLoader" class="loading"></div>

            <ng-container *ngIf="showVue">
                <div>
                    <div class="flex justify-between c_mbuttom">
                        <span class="inline-flex items-center cursor-pointer mb-1" (click)="showVue = !showVue">
                            <mat-icon class="icon-size-5 text-current"
                                [svgIcon]="'heroicons_solid:arrow-sm-left'"></mat-icon>
                            <span class="ml-1.5 font-medium leading-5">Retour</span>
                        </span>
                        <div class="flex items-center mt-8 mb-4 lg:m-0 lg:ml-auto floatRight">
                            <button *ngIf="hitoriquesTransactions?.length!==0" class="c_btnAccount_attribut c_btnAccountF mr-2" matTooltip="Relevé compte" mat-icon-button (click)="releveCompte()">
                                <mat-icon class="c_icons c_cursor icon-size-5" svgIcon="heroicons_outline:document-text"></mat-icon>
                            </button>
                            <button *ngIf="currentCompte?.statut === constantes.STATUS.OUVERT" class="c_btnAccount_attribut c_btnAccountF mr-2" matTooltip="Bloquer compte" mat-icon-button (click)="activerDesactiver(currentCompte, 'BLOQUE')">
                                <mat-icon class="c_icons c_cursor icon-size-5" [svgIcon]="'heroicons_outline:lock-closed'">
                                </mat-icon>
                            </button>
                            <button *ngIf="currentCompte?.statut === constantes.STATUS.BLOQUE" class="c_btnAccount_attribut c_btnAccountF mr-2" matTooltip="Débloquer compte" mat-icon-button (click)="activerDesactiver(currentCompte, 'OUVERT')">
                                <mat-icon class="c_icons c_cursor icon-size-5" [svgIcon]="'heroicons_outline:lock-open'">
                                </mat-icon>
                            </button>
                            <button  class="c_btnAccount_attribut c_btnAccountF mr-2" matTooltip="Clôturer compte" (click)="cloturerCompte()"
                                mat-icon-button>
                                <mat-icon class="c_icons c_cursor icon-size-5" [svgIcon]="'heroicons_outline:x-circle'">
                                </mat-icon>
                            </button>
                        </div>
                    </div>
                    <hr>
                    <mat-tab-group dynamicHeight class="w-full" [(selectedIndex)]="currentTab">
                        <mat-tab label="Comptes">
                            <div>
                                <div class="flex flex-col w-full p-4">
                                    <div class="flex justify-between">
                                        <div class="leading-tight uppercase c_title_header">Informations générales</div>
                                    </div>
                                    <hr class="w-full border-t">
                                    <div class="flex flex-auto w-full">
                                        <div class="flex flex-col w-full">
                                            <div class="grid grid-cols-2">
                                                <span class="mr-3">Numéro de compte: </span>
                                                <span class="leading-none font-bold">{{currentCompte?.numero}}</span>
                                            </div>
                                            <div class="grid grid-cols-2 mt-4">
                                                <span class="mr-3">Ancien Numéro: </span>
                                                <span class="leading-none font-bold">{{currentCompte?.ancienNumero}}</span>
                                            </div>
                                            <div class="grid grid-cols-2 mt-4">
                                                <span class="mr-3">Type compte: </span>
                                                <span
                                                    class="leading-none font-bold">{{currentCompte?.typeCompte?.libelle}}</span>
                                            </div>
                                            <div class="grid grid-cols-2 mt-4">
                                                <span class="mr-3">Solde compte: </span>
                                                <span class="leading-none font-bold">{{currentCompte?.soldeCompte |
                                                    number : '1.0-0':'fr'}}
                                                    {{currentCompte?.devise?.codeAlphaDevise}}</span>
                                            </div>
                                            <div class="grid grid-cols-2 mt-4">
                                                <span class="mr-3">Solde indicatif: </span>
                                                <span class="leading-none font-bold">{{currentCompte?.soldeIndicatif |
                                                    number : '1.0-0':'fr'}}
                                                    {{currentCompte?.devise?.codeAlphaDevise}}</span>
                                            </div>
                                            <div class="grid grid-cols-2 mt-4">
                                                <span class="mr-3">Montant réservé : </span>
                                                <span
                                                    class="leading-none font-bold">{{(currentCompte?.montantBloque) ? (currentCompte?.montantBloque | number : '1.0-0':'fr') : 0}}</span>
                                            </div>
                                        </div>
                                        <div class="flex flex-col w-full">
                                            <div class="grid grid-cols-2">
                                                <span class="mr-3">Intitulé compte: </span>
                                                <span class="leading-none font-bold">{{currentCompte?.nom}}</span>
                                            </div>
                                            <div class="grid grid-cols-2 mt-4">
                                                <span class="mr-3">Devise: </span>
                                                <span
                                                    class="leading-none font-bold">{{currentCompte?.devise?.codeAlphaDevise}}</span>
                                            </div>
                                            <div class="grid grid-cols-2 mt-4">
                                                <span class="mr-3">Statut: </span>
                                                <span *ngIf="currentCompte?.statut === 'CLOTURE'"
                                                    class="status-grey c_statut">{{currentCompte?.statut}}</span>
                                                <span *ngIf="currentCompte?.statut === 'OUVERT'"
                                                    class="badge-success1 c_statut">{{currentCompte?.statut}}</span>
                                                <span *ngIf="currentCompte?.statut === 'BLOQUE'"
                                                    class="status-error c_statut">{{currentCompte?.statut}}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <attribut-complementaire title="Attribut complémentaire" (ajoutAttributComplementaire)="ajoutAttributComplementaire(currentCompte,attributComplementaires)" [infosClient]="infosClient" (updateAttributComplementaire)="updateAttributComplementaire($event,currentCompte)" [attributComplementaire]="attributComplementaires" [natureAttribut]="'COMPTE'"></attribut-complementaire>

                            </div>
                        </mat-tab>
                        <mat-tab label="Transactions du jour">
                            <fuse-card class="flex flex-col w-full p-4">
                                <hr class="w-full border-t">
                                <div *ngIf="isLoader && transactionsJour?.length===0" class="custom-loader"></div>
                                <table aria-label="compte 2" *ngIf="transactionsJour?.length!==0"
                                    class="w-full bg-transparent" mat-table matSort
                                    [dataSource]="transactionsJourDataSource" [trackBy]="trackByFn">
                                    <ng-container matColumnDef="date">
                                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                            Date
                                        </th>
                                        <td mat-cell *matCellDef="let reservation">
                                            <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                                {{reservation?.dateTransaction | date: 'dd/MM/yyyy'}}
                                            </span>
                                        </td>
                                    </ng-container>
                                    <ng-container matColumnDef="operation">
                                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                            Opération
                                        </th>
                                        <td mat-cell *matCellDef="let reservation">
                                            <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">{{reservation?.evenementComptable?.libelle}}
                                            </span>
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="montant">
                                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                            Montant
                                        </th>
                                        <td mat-cell *matCellDef="let reservation">
                                            <span class="pr-6 whitespace-nowrap">
                                                {{reservation?.montantTransaction | number : '1.0-0':'fr'}}
                                            </span>
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="statut">
                                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                            Statut
                                        </th>
                                        <td mat-cell *matCellDef="let reservation">
                                            <span class="badge-success mt-3" *ngIf="reservation?.statut === 'VALIDE'">{{reservation?.statut}}</span>
                                            <span class="badge-redd mt-3" *ngIf="reservation?.statut === 'FERME'">{{reservation?.statut}}</span>
                                            <span class="badge-blue mt-3" *ngIf="reservation?.statut === 'SAISIE'">{{reservation?.statut}}</span>
                                            <span class="badge-red mt-3" *ngIf="reservation?.statut === 'ANNULE'">{{reservation?.statut}}</span>
                                        </td>
                                    </ng-container>
                                    <ng-container matColumnDef="action">
                                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                            Action
                                        </th>
                                        <td class="pr-4" mat-cell *matCellDef="let client">
                                            <p>
                                                <button (click)="voirDetailTransaction(client)" class="btn-privilege" matTooltip="Détail" mat-icon-button>
                                                    <mat-icon class="iconAction icon-size-4 c-colorDetail" [svgIcon]="'heroicons_outline:clipboard-list'"></mat-icon>
                                                </button>
                                                <button
                                                    *ngIf="client?.statut === 'SAISIE'"
                                                    matTooltip="Annuler la transaction" (click)="motifAnnulationTransaction(client)"
                                                    mat-icon-button>
                                                    <mat-icon class="iconAction detail icon-size-5 text-red-400"
                                                              svgIcon="mat_outline:cancel">
                                                    </mat-icon>
                                                </button>
                                                <span [class]="showLoader" *ngIf="currentIndex === client">
                                        <mat-progress-spinner class="circle-loader" color="#000000"
                                                              [mode]="'indeterminate'" [strokeWidth]="4" [value]="2" [diameter]="20">
                                        </mat-progress-spinner>
                                    </span>
                                            </p>
                                        </td>
                                    </ng-container>
                                    <tr mat-header-row *matHeaderRowDef="releveJorColumns"></tr>
                                    <tr class="order-row h-16" mat-row *matRowDef="let row; columns: releveJorColumns;">
                                    </tr>
                                </table>
                                <div class="histoTrans" *ngIf="transactionsJour?.length===0 && !isLoader">Pas de transactions</div>
                            </fuse-card>
                                                                        </mat-tab>
                                                                        <mat-tab label="Relevé compte">
                                                                            <div style="display: flex !important;justify-content: center;" class="mt-4">
                                                                                <div style="display: contents; align-self: center;">
                                                                                    <mat-form-field class="fuse-mat-dense w-1/3" appearance="outline">
                                                                                        <mat-label class="enteteccColor">Date début</mat-label>
                                                                                        <input (dateChange)="InitialDateFin()" [max]="dateComptable" [(ngModel)]="dateStart"
                                                                                            class="enteteccColor" [autocomplete]="'off'" matInput type="text"
                                                                                            (click)="pickerDebut.open()" [autocomplete]="'off'" matInput
                                                                                            [matDatepicker]="pickerDebut" bsDatepicker />
                                                                                        <mat-datepicker-toggle matSuffix [for]="pickerDebut">
                                                                                            <mat-icon matDatepickerToggleIcon
                                                                                                class="enteteccColor">calendar_today</mat-icon>
                                                                                        </mat-datepicker-toggle>
                                                                                        <mat-datepicker #pickerDebut></mat-datepicker>
                                                                                    </mat-form-field>
                                                                                </div>
                                                                                &nbsp;
                                                                                &nbsp;
                                                                                <div style="display: contents; align-self: center;">
                                                                                    <mat-form-field class="fuse-mat-dense w-1/3" appearance="outline" fxFlex="50">
                                                                                        <mat-label class="enteteccColor">Date fin</mat-label>
                                                                                        <input [min]="minDateDebut" [max]="dateComptable" [(ngModel)]="dateEnd"
                                                                                               class="enteteccColor" [autocomplete]="'off'" matInput type="text"
                                                                                               (click)="pickerFin.open()" [autocomplete]="'off'" matInput
                                                                                               [matDatepicker]="pickerFin" bsDatepicker />
                                                                                        <mat-datepicker-toggle matSuffix [for]="pickerFin">
                                                                                            <mat-icon matDatepickerToggleIcon
                                                                                                class="enteteccColor">calendar_today</mat-icon>
                                                                                        </mat-datepicker-toggle>
                                                                                        <mat-datepicker #pickerFin></mat-datepicker>
                                                                                    </mat-form-field>
                                                                                </div>
                                                                                &nbsp;
                                                                                <button style="margin-top: 10px;" [disabled]="isLoader"
                                                                                    (click)="historiqueTransaction()" mat-raised-button class="submit-button"
                                                                                    aria-label="VALIDER" type="button">
                                                                                    <span class="textForm">Rechercher</span>
                                                                                </button>
                                                                            </div>

                                                                            <div *ngIf="isLoader" class="loading">
                                                                            </div>

                                                                            <fuse-card class="flex flex-col w-full p-4">

                                                                                <hr class="w-full border-t">
                                                                                <div class="overflow-x-scroll">
                                                                                <table aria-label="compte 3" *ngIf="hitoriquesTransactions?.length!==0"
                                                                                    class="w-full bg-transparent" mat-table matSort
                                                                                    [dataSource]="hitoriquesTransactionsDataSource" [trackBy]="trackByFn">
                                                                                    <ng-container matColumnDef="numeroOperation">
                                                                                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                                                                            Numéro
                                                                                        </th>
                                                                                        <td mat-cell *matCellDef="let reservation">
                                                                                            <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                                                                                {{reservation?.numeroOperation}}
                                                                                            </span>
                                                                                        </td>
                                                                                    </ng-container>
                                                                                    <ng-container matColumnDef="libelleEcriture">
                                                                                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                                                                            Intitulé
                                                                                        </th>
                                                                                        <td mat-cell *matCellDef="let reservation" [matTooltip]="reservation?.intituleTransaction">
                                                                                            <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                                                                                {{reservation?.intituleTransaction}}
                                                                                            </span>
                                                                                        </td>
                                                                                    </ng-container>

                                                                                    <ng-container matColumnDef="montant">
                                                                                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                                                                            Montant
                                                                                        </th>
                                                                                        <td mat-cell *matCellDef="let reservation">
                                                                                            {{reservation?.montant | number :'1.0-0':'fr'}}
                                                                                        </td>
                                                                                    </ng-container>
                                                                                    <ng-container matColumnDef="dateOperation">
                                                                                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                                                                            Date
                                                                                        </th>
                                                                                        <td mat-cell *matCellDef="let reservation">
                                                                                            <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                                                                                {{reservation?.dateEcriture | date: 'dd/MM/yyyy'}}
                                                                                            </span>
                                                                                        </td>
                                                                                    </ng-container>
                                                                                    <ng-container matColumnDef="action">
                                                                                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                                                                           Action
                                                                                        </th>
                                                                                        <td mat-cell *matCellDef="let reservation">
                                                                                            <button (click)="voirDetail(reservation)" class="btn-privilege" matTooltip="Détail" mat-icon-button>
                                                                                                <mat-icon class="iconAction icon-size-4 c-colorDetail"
                                                                                                          [svgIcon]="'heroicons_outline:clipboard-list'"></mat-icon>
                                                                                            </button>
                                                                                        </td>
                                                                                    </ng-container>
                                                                                    <tr mat-header-row *matHeaderRowDef="releveJourColumns"></tr>
                                                                                    <tr class="order-row h-16" mat-row
                                                                                        *matRowDef="let row; columns: releveJourColumns;"></tr>
                                                                                </table>
                                                                                </div>
                                                                                <div class="histoTrans"
                                                                                    *ngIf="!isLoader && hitoriquesTransactions?.length===0  && dateStart && dateEnd && verifDate">Pas
                                                                                    de transactions
                                                                                </div>
                                                                            </fuse-card>


                                                                        </mat-tab>
                                                                        <mat-tab label="Frais liés" *ngIf="typeCompte === 'EPARGNE'">
                                                                            <frais-lier [fraisLierDataSource]="listFraisLier"></frais-lier>
                                                                        </mat-tab>
                                                                        <mat-tab label="Réservation de fonds" *ngIf="typeCompte === 'EPARGNE'">
                                                                            <fuse-card class="flex flex-col w-full p-4">
                                                                                <div class="flex justify-between mb-1.5">
                                                                                    <div class="mr-4 text-lg font-medium tracking-tight leading-6 truncate c_label">
                                                                                        Réservations de fonds</div>
                                                                                    <div class="flex items-center mt-8 mb-4 lg:m-0 lg:ml-auto floatRight">
                                                                                        <button class="c_btnAccount_attribut c_btnAccountF" (click)="addReservationFond()" matTooltip="Ajouter une réservation" mat-icon-button>
                                                                                            <mat-icon class="c_icons c_cursor icon-size-5" [svgIcon]="'heroicons_solid:plus-circle'"></mat-icon>
                                                                                        </button>
                                                                                    </div>
                                                                                </div>
                                                                                <hr class="w-full border-t">
                                                                                <table aria-label="compte 4" class="w-full bg-transparent" mat-table matSort
                                                                                    [dataSource]="reservationDataSource" [trackBy]="trackByFn">

                                                                                    <ng-container matColumnDef="montant">
                                                                                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                                                                            Montant
                                                                                        </th>
                                                                                        <td mat-cell *matCellDef="let reservation">
                                                                                            <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                                                                                {{reservation?.montant | number :'1.0-0':'fr'}}
                                                                                            </span>
                                                                                        </td>
                                                                                    </ng-container>

                                                                                    <ng-container matColumnDef="dateCreated">
                                                                                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                                                                            Date de création
                                                                                        </th>
                                                                                        <td mat-cell *matCellDef="let reservation">
                                                                                            <span class="pr-6 whitespace-nowrap">
                                                                                                {{reservation?.dateCreated | date: 'dd/MM/yyyy'}}
                                                                                            </span>
                                                                                        </td>
                                                                                    </ng-container>

                                                                                    <ng-container matColumnDef="motif">
                                                                                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                                                                            Motif de la réservation
                                                                                        </th>
                                                                                        <td mat-cell *matCellDef="let reservation">
                                                                                            <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                                                                                {{reservation?.motif}}
                                                                                            </span>
                                                                                        </td>
                                                                                    </ng-container>
                                                                                    <ng-container matColumnDef="action">
                                                                                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                                                                            Action
                                                                                        </th>
                                                                                        <td mat-cell *matCellDef="let reservation">
                                                                                            <p class="pr-6 whitespace-nowrap">
<!--                                                                                                <button matTooltip="Modifier la réservation" mat-icon-button-->
<!--                                                                                                    (click)="updateReservationFond(reservation)">-->
<!--                                                                                                    <mat-icon class=" text-green-400 icon-size-5"-->
<!--                                                                                                        [svgIcon]="'edit'"></mat-icon>-->
<!--                                                                                                </button>-->
                                                                                                <button matTooltip="Lever la réservation" mat-icon-button
                                                                                                    (click)="supprimerReservation(reservation?.id)">
                                                                                                    <mat-icon class="text-red-400 icon-size-4"
                                                                                                        [svgIcon]="'delete_outline'"></mat-icon>
                                                                                                </button>
                                                                                            </p>
                                                                                        </td>
                                                                                    </ng-container>
                                                                                    <tr mat-header-row *matHeaderRowDef="reservationColumns"></tr>
                                                                                    <tr class="order-row h-16" mat-row
                                                                                        *matRowDef="let row; columns: reservationColumns;"></tr>
                                                                                </table>
                                                                            </fuse-card>
                                                                        </mat-tab>
                                                                        <mat-tab label="Signataires"
                                                                            *ngIf="currentClient?.typeClient?.libelle !== 'Particulier' && currentClient?.typeClient?.libelle === 'Entreprise'">
                                                                            <fuse-card class="flex flex-col w-full p-4">
                                                                                <div class="flex justify-between mb-1.5">
                                                                                    <div class="mr-4 text-lg font-medium tracking-tight leading-6 truncate c_label">
                                                                                        Signataires</div>
                                                                                    <div class="flex items-center mt-8 mb-4 lg:m-0 lg:ml-auto floatRight">
                                                                                        <button class="c_btnAccount_attribut c_btnAccountF" (click)="addSignataire()" matTooltip="Ajouter une réservation" mat-icon-button>
                                                                                            <mat-icon class="c_icons c_cursor icon-size-5" [svgIcon]="'heroicons_solid:plus-circle'"></mat-icon>
                                                                                        </button>
                                                                                    </div>
                                                                                </div>
                                                                                <hr class="w-full border-t">
                                                                                <table aria-label="compte 5" *ngIf="listSignataire?.length !==0"
                                                                                    class="w-full bg-transparent" mat-table matSort [dataSource]="signatairesDataSource"
                                                                                    [trackBy]="trackByFn" #signataireTable>
                                                                                    <ng-container matColumnDef="personnePhysique">
                                                                                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                                                                            Personne Physique
                                                                                        </th>
                                                                                        <td mat-cell *matCellDef="let signataire">
                                                                                            <span class="pr-6 whitespace-nowrap">
                                                                                                {{signataire.personnePhysique?.prenom}}
                                                                                                {{signataire.personnePhysique?.nom}}
                                                                                            </span>
                                                                                        </td>
                                                                                    </ng-container>
                                                                                    <ng-container matColumnDef="periodiciteMontantMax">
                                                                                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                                                                            Périodicite
                                                                                        </th>
                                                                                        <td mat-cell *matCellDef="let signataire">
                                                                                            <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                                                                                {{signataire.periodiciteMontantMax?.libelle}}
                                                                                            </span>
                                                                                        </td>
                                                                                    </ng-container>
                                                                                    <ng-container matColumnDef="montantMaxAutorise">
                                                                                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                                                                            Montant max autorisé
                                                                                        </th>
                                                                                        <td mat-cell *matCellDef="let signataire">
                                                                                            <span class="pr-6 whitespace-nowrap">
                                                                                                {{signataire.montantMaxAutorise | number :'1.0-0':'fr'}}
                                                                                            </span>
                                                                                        </td>
                                                                                    </ng-container>
                                                                                    <tr mat-header-row *matHeaderRowDef="signatairesColumns"></tr>
                                                                                    <tr class="order-row h-16" mat-row
                                                                                        *matRowDef="let row; columns: signatairesColumns;"></tr>
                                                                                </table>
                                                                                <div *ngIf="listSignataire?.length ===0">
                                                                                    <div class="p-8 sm:p-16 border-t text-3xl font-semibold tracking-tight text-center">
                                                                                        La liste est vide !
                                                                                    </div>
                                                                                </div>
                                                                            </fuse-card>
                                                                        </mat-tab>
                                                                        <mat-tab label="Mandataire"
                                                                            *ngIf="currentClient?.typeClient?.libelle === 'Particulier' || currentClient?.typeClient?.libelle === 'Entreprise'">
                                                                            <fuse-card class="flex flex-col w-full p-4">
                                                                                <div class="flex justify-between mb-1.5">
                                                                                    <div class="mr-4 text-lg font-medium tracking-tight leading-6 truncate c_label">
                                                                                        Mandataire</div>
                                                                                    <div class="flex items-center mt-8 lg:m-0 lg:ml-auto floatRight">
                                                                                        <button class="c_btnAccount_attribut c_btnAccountF mb-4" (click)="addMandataire()" matTooltip="Ajouter un mandataire" mat-icon-button>
                                                                                            <mat-icon class="c_icons c_cursor icon-size-5" [svgIcon]="'heroicons_solid:plus-circle'"></mat-icon>
                                                                                        </button>
                                                                                    </div>
                                                                                </div>
                                                                                <hr class="w-full border-t">
                                                                                <table aria-label="compte 4" class="w-full bg-transparent" mat-table matSort
                                                                                       [dataSource]="mandataireDataSource" [trackBy]="trackByFn">

                                                                                    <ng-container matColumnDef="prenom">
                                                                                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                                                                            Prénom mandataire
                                                                                        </th>
                                                                                        <td mat-cell *matCellDef="let mandataire">
                                                                                            <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                                                                                {{mandataire?.personnePhysique.prenom}}
                                                                                            </span>
                                                                                        </td>
                                                                                    </ng-container>
                                                                                    <ng-container matColumnDef="nom">
                                                                                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                                                                            Nom mandataire
                                                                                        </th>
                                                                                        <td mat-cell *matCellDef="let mandataire">
                                                                                            <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                                                                                {{mandataire?.personnePhysique.nom}}
                                                                                            </span>
                                                                                        </td>
                                                                                    </ng-container>
                                                                                    <ng-container matColumnDef="telephone">
                                                                                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                                                                            Téléphone mandataire
                                                                                        </th>
                                                                                        <td mat-cell *matCellDef="let mandataire">
                                                                                            <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                                                                                {{mandataire?.personnePhysique.phoneNumber}}
                                                                                            </span>
                                                                                        </td>
                                                                                    </ng-container>

                                                                                    <ng-container matColumnDef="date">
                                                                                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                                                                            Date fin mandataire
                                                                                        </th>
                                                                                        <td mat-cell *matCellDef="let mandataire">
                                                                                            <span class="pr-6 whitespace-nowrap">
                                                                                                {{mandataire?.dateFin | date: 'dd/MM/yyyy'}}
                                                                                            </span>
                                                                                        </td>
                                                                                    </ng-container>
                                                                                    <ng-container matColumnDef="action">
                                                                                        <th mat-header-cell mat-sort-header *matHeaderCellDef>
                                                                                            Action
                                                                                        </th>
                                                                                        <td mat-cell *matCellDef="let mandataire">
                                                                                            <p class="pr-6 whitespace-nowrap">
                                                                                                <button matTooltip="Supprimer le mandataire" mat-icon-button (click)="supprimerMandataire(mandataire?.id)">
                                                                                                    <mat-icon class="text-red-400 icon-size-4"
                                                                                                              [svgIcon]="'delete_outline'"></mat-icon>
                                                                                                </button>
                                                                                            </p>
                                                                                        </td>
                                                                                    </ng-container>
                                                                                    <tr mat-header-row *matHeaderRowDef="mandataireColumns"></tr>
                                                                                    <tr class="order-row h-16" mat-row
                                                                                        *matRowDef="let row; columns: mandataireColumns;"></tr>
                                                                                </table>
                                                                                <div *ngIf="isLoading" class="custom-loader"></div>
                                                                            </fuse-card>
                                                                        </mat-tab>
                                                                        <mat-tab label="Groupement" *ngIf="currentClient?.typeClient?.libelle === 'Groupement'">
                                                                            <p>Groupement</p>
                                                                        </mat-tab>
                                                                    </mat-tab-group>
                                                                </div>
                                                            </ng-container>

                                                        </fuse-card>
                                                    </div>
                                                </div>
